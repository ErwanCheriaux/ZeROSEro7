<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Battery Service</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Battery Service</div>  </div>
</div><!--header-->
<div class="contents">

<p>Battery Service module.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structble__bas__evt__t.html">ble_bas_evt_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Battery Service event.  <a href="structble__bas__evt__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structble__bas__init__t.html">ble_bas_init_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Battery Service init structure. This contains all options and data needed for initialization of the service.  <a href="structble__bas__init__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structble__bas__s.html">ble_bas_s</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Battery Service structure. This contains various status information for the service.  <a href="structble__bas__s.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga5cbe3844bba0e87edd94c71817b4671d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__bas.html#ga5cbe3844bba0e87edd94c71817b4671d">BLE_BAS_DEF</a>(_name)</td></tr>
<tr class="memdesc:ga5cbe3844bba0e87edd94c71817b4671d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro for defining a ble_bas instance.  <a href="#ga5cbe3844bba0e87edd94c71817b4671d">More...</a><br /></td></tr>
<tr class="separator:ga5cbe3844bba0e87edd94c71817b4671d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaea81f98230816bcfcbfd6ccbb4db3999"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structble__bas__s.html">ble_bas_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__bas.html#gaea81f98230816bcfcbfd6ccbb4db3999">ble_bas_t</a></td></tr>
<tr class="separator:gaea81f98230816bcfcbfd6ccbb4db3999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb498f228ea70a73aade5fe9412a3f17"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__bas.html#gadb498f228ea70a73aade5fe9412a3f17">ble_bas_evt_handler_t</a>) (<a class="el" href="group__ble__bas.html#gaea81f98230816bcfcbfd6ccbb4db3999">ble_bas_t</a> *p_bas, <a class="el" href="structble__bas__evt__t.html">ble_bas_evt_t</a> *p_evt)</td></tr>
<tr class="memdesc:gadb498f228ea70a73aade5fe9412a3f17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Battery Service event handler type.  <a href="#gadb498f228ea70a73aade5fe9412a3f17">More...</a><br /></td></tr>
<tr class="separator:gadb498f228ea70a73aade5fe9412a3f17"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gab63b7f474ce48636cd355f6b75ea1ca9"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__bas.html#gab63b7f474ce48636cd355f6b75ea1ca9">ble_bas_evt_type_t</a> { <a class="el" href="group__ble__bas.html#ggab63b7f474ce48636cd355f6b75ea1ca9a657f8681ada82fd2990d5458442ed85a">BLE_BAS_EVT_NOTIFICATION_ENABLED</a>, 
<a class="el" href="group__ble__bas.html#ggab63b7f474ce48636cd355f6b75ea1ca9afcba4bddb1a583374bb27d3f3ed5b8d1">BLE_BAS_EVT_NOTIFICATION_DISABLED</a>
 }<tr class="memdesc:gab63b7f474ce48636cd355f6b75ea1ca9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Battery Service event type.  <a href="group__ble__bas.html#gab63b7f474ce48636cd355f6b75ea1ca9">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gab63b7f474ce48636cd355f6b75ea1ca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacb8ac9205dcec39e216575c76261c807"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__bas.html#gacb8ac9205dcec39e216575c76261c807">ble_bas_init</a> (<a class="el" href="group__ble__bas.html#gaea81f98230816bcfcbfd6ccbb4db3999">ble_bas_t</a> *p_bas, const <a class="el" href="structble__bas__init__t.html">ble_bas_init_t</a> *p_bas_init)</td></tr>
<tr class="memdesc:gacb8ac9205dcec39e216575c76261c807"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for initializing the Battery Service.  <a href="#gacb8ac9205dcec39e216575c76261c807">More...</a><br /></td></tr>
<tr class="separator:gacb8ac9205dcec39e216575c76261c807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad4017a4e52b6ddc44cc0308c979d845"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__bas.html#gaad4017a4e52b6ddc44cc0308c979d845">ble_bas_on_ble_evt</a> (ble_evt_t const *p_ble_evt, void *p_context)</td></tr>
<tr class="memdesc:gaad4017a4e52b6ddc44cc0308c979d845"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for handling the Application's BLE Stack events.  <a href="#gaad4017a4e52b6ddc44cc0308c979d845">More...</a><br /></td></tr>
<tr class="separator:gaad4017a4e52b6ddc44cc0308c979d845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58d8f4336cce49ea5b3a2f8997bfe00e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__bas.html#ga58d8f4336cce49ea5b3a2f8997bfe00e">ble_bas_battery_level_update</a> (<a class="el" href="group__ble__bas.html#gaea81f98230816bcfcbfd6ccbb4db3999">ble_bas_t</a> *p_bas, uint8_t battery_level)</td></tr>
<tr class="memdesc:ga58d8f4336cce49ea5b3a2f8997bfe00e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for updating the battery level.  <a href="#ga58d8f4336cce49ea5b3a2f8997bfe00e">More...</a><br /></td></tr>
<tr class="separator:ga58d8f4336cce49ea5b3a2f8997bfe00e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Battery Service module. </p>
<p>This module implements the Battery Service with the Battery Level characteristic. During initialization it adds the Battery Service and Battery Level characteristic to the BLE stack database. Optionally it can also add a Report Reference descriptor to the Battery Level characteristic (used when including the Battery Service in the HID service).</p>
<p>If specified, the module will support notification of the Battery Level characteristic through the <a class="el" href="group__ble__bas.html#ga58d8f4336cce49ea5b3a2f8997bfe00e" title="Function for updating the battery level. ">ble_bas_battery_level_update()</a> function. If an event handler is supplied by the application, the Battery Service will generate Battery Service events to the application.</p>
<dl class="section note"><dt>Note</dt><dd>The application must register this module as BLE event observer using the NRF_SDH_BLE_OBSERVER macro. Example: <div class="fragment"><div class="line"><a class="code" href="structble__bas__s.html">ble_bas_t</a> instance;</div><div class="line"><a class="code" href="ble__dfu_8c.html#aff90fc5573cfa7998ca6cf175910ae6a">NRF_SDH_BLE_OBSERVER</a>(anything, BLE_BAS_BLE_OBSERVER_PRIO,</div><div class="line">                     <a class="code" href="group__ble__bas.html#gaad4017a4e52b6ddc44cc0308c979d845">ble_bas_on_ble_evt</a>, &amp;instance);</div></div><!-- fragment --></dd>
<dd>
Attention! To maintain compliance with Nordic Semiconductor ASA Bluetooth profile qualification listings, this section of source code must not be modified. </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga5cbe3844bba0e87edd94c71817b4671d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5cbe3844bba0e87edd94c71817b4671d">&#9670;&nbsp;</a></span>BLE_BAS_DEF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLE_BAS_DEF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_name</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Macro for defining a ble_bas instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_name</td><td>Name of the instance. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gadb498f228ea70a73aade5fe9412a3f17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb498f228ea70a73aade5fe9412a3f17">&#9670;&nbsp;</a></span>ble_bas_evt_handler_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* ble_bas_evt_handler_t) (<a class="el" href="group__ble__bas.html#gaea81f98230816bcfcbfd6ccbb4db3999">ble_bas_t</a> *p_bas, <a class="el" href="structble__bas__evt__t.html">ble_bas_evt_t</a> *p_evt)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Battery Service event handler type. </p>

</div>
</div>
<a id="gaea81f98230816bcfcbfd6ccbb4db3999"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea81f98230816bcfcbfd6ccbb4db3999">&#9670;&nbsp;</a></span>ble_bas_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structble__bas__s.html">ble_bas_s</a> <a class="el" href="group__ble__bas.html#gaea81f98230816bcfcbfd6ccbb4db3999">ble_bas_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gab63b7f474ce48636cd355f6b75ea1ca9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab63b7f474ce48636cd355f6b75ea1ca9">&#9670;&nbsp;</a></span>ble_bas_evt_type_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__ble__bas.html#gab63b7f474ce48636cd355f6b75ea1ca9">ble_bas_evt_type_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Battery Service event type. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggab63b7f474ce48636cd355f6b75ea1ca9a657f8681ada82fd2990d5458442ed85a"></a>BLE_BAS_EVT_NOTIFICATION_ENABLED&#160;</td><td class="fielddoc"><p>Battery value notification enabled event. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggab63b7f474ce48636cd355f6b75ea1ca9afcba4bddb1a583374bb27d3f3ed5b8d1"></a>BLE_BAS_EVT_NOTIFICATION_DISABLED&#160;</td><td class="fielddoc"><p>Battery value notification disabled event. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga58d8f4336cce49ea5b3a2f8997bfe00e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58d8f4336cce49ea5b3a2f8997bfe00e">&#9670;&nbsp;</a></span>ble_bas_battery_level_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ble_bas_battery_level_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ble__bas.html#gaea81f98230816bcfcbfd6ccbb4db3999">ble_bas_t</a> *&#160;</td>
          <td class="paramname"><em>p_bas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>battery_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for updating the battery level. </p>
<p>The application calls this function after having performed a battery measurement. If notification has been enabled, the battery level characteristic is sent to the client.</p>
<dl class="section note"><dt>Note</dt><dd>For the requirements in the BAS specification to be fulfilled, this function must be called upon reconnection if the battery level has changed while the service has been disconnected from a bonded client.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_bas</td><td>Battery Service structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">battery_level</td><td>New battery measurement value (in percent of full capacity).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NRF_SUCCESS on success, otherwise an error code. </dd></dl>

</div>
</div>
<a id="gacb8ac9205dcec39e216575c76261c807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacb8ac9205dcec39e216575c76261c807">&#9670;&nbsp;</a></span>ble_bas_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ble_bas_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ble__bas.html#gaea81f98230816bcfcbfd6ccbb4db3999">ble_bas_t</a> *&#160;</td>
          <td class="paramname"><em>p_bas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structble__bas__init__t.html">ble_bas_init_t</a> *&#160;</td>
          <td class="paramname"><em>p_bas_init</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for initializing the Battery Service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">p_bas</td><td>Battery Service structure. This structure will have to be supplied by the application. It will be initialized by this function, and will later be used to identify this particular service instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_bas_init</td><td>Information needed to initialize the service.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NRF_SUCCESS on successful initialization of service, otherwise an error code. </dd></dl>

</div>
</div>
<a id="gaad4017a4e52b6ddc44cc0308c979d845"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaad4017a4e52b6ddc44cc0308c979d845">&#9670;&nbsp;</a></span>ble_bas_on_ble_evt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ble_bas_on_ble_evt </td>
          <td>(</td>
          <td class="paramtype">ble_evt_t const *&#160;</td>
          <td class="paramname"><em>p_ble_evt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for handling the Application's BLE Stack events. </p>
<p>Handles all events from the BLE stack of interest to the Battery Service.</p>
<dl class="section note"><dt>Note</dt><dd>For the requirements in the BAS specification to be fulfilled, <a class="el" href="group__ble__bas.html#ga58d8f4336cce49ea5b3a2f8997bfe00e" title="Function for updating the battery level. ">ble_bas_battery_level_update()</a> must be called upon reconnection if the battery level has changed while the service has been disconnected from a bonded client.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_ble_evt</td><td>Event received from the BLE stack. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_context</td><td>Battery Service structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
